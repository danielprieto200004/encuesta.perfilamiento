<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tus Resultados | UNIMINUTO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 25%, #3b82f6 50%, #2563eb 75%, #1d4ed8 100%); background-size: 400% 400%; animation: gradientShift 15s ease infinite; min-height: 100vh; position: relative; }
        body::before { content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%); pointer-events: none; z-index: -1; }
        @keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .glass-effect { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
        .gradient-text { background: linear-gradient(135deg, #1E40AF, #7C3AED); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .floating-element { animation: float 6s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        .pulse-animation { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .result-card { transition: all 0.3s ease; }
        .result-card:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="text-gray-800">

    <header class="glass-effect shadow-2xl p-4 md:p-6 sticky top-0 z-20">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center gap-4 md:gap-0">
            <div class="flex items-center space-x-4 floating-element">
                <img src="logo.png" alt="Logo UNIMINUTO" class="h-20 w-auto">
                <div>
                    <p class="text-xs md:text-sm text-gray-600 font-medium">SymbioTIC - Observatorio Experimental</p>
                </div>
            </div>
            <div class="text-center md:text-right">
                <span class="font-bold text-base md:text-lg gradient-text">Test ADN Estudiantil</span>
                <p class="text-xs md:text-sm text-gray-600">Paso 3: Resultados</p>
            </div>
            </div>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        <section id="resultsSection" class="mt-8 md:mt-12">
            <div class="text-center glass-effect p-6 md:p-12 rounded-2xl shadow-2xl mb-8 md:mb-12 floating-element">
                <h2 class="text-3xl md:text-5xl font-extrabold gradient-text mb-4">¬°Estos son tus perfiles!</h2>
                <p id="student-info-display" class="text-base md:text-lg text-gray-500 mb-6"></p>
                <p class="text-lg md:text-xl text-gray-700 max-w-3xl mx-auto">
                    Recuerda, no hay perfiles mejores o peores, solo diferentes maneras de aprender y conectar. Usa esta informaci√≥n para potenciar tus fortalezas.
                </p>
            </div>
            
            <div id="results-container" class="space-y-8 md:space-y-12">
                <div id="result-card-1" class="result-card glass-effect p-6 md:p-8 rounded-2xl shadow-xl flex flex-col md:flex-row md:space-x-8 items-center">
                    <div class="w-full md:w-2/5"><canvas id="chart1"></canvas></div>
                    <div class="w-full md:w-3/5 mt-6 md:mt-0 text-center md:text-left">
                        <h3 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">Tu ADN Estudiantil üß¨</h3>
                        <div id="result-text-1"><h4 class="text-xl md:text-2xl font-bold text-blue-700 mb-2"></h4><p class="text-gray-700 text-base md:text-lg"></p></div>
                    </div>
                </div>
                <div id="result-card-2" class="result-card glass-effect p-6 md:p-8 rounded-2xl shadow-xl flex flex-col md:flex-row md:space-x-8 items-center">
                     <div class="w-full md:w-2/5"><canvas id="chart2"></canvas></div>
                    <div class="w-full md:w-3/5 mt-6 md:mt-0 text-center md:text-left">
                        <h3 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">Tu Estilo de Aprendizaje ‚úçÔ∏è</h3>
                         <div id="result-text-2"><h4 class="text-xl md:text-2xl font-bold text-purple-700 mb-2"></h4><p class="text-gray-700 text-base md:text-lg"></p></div>
                    </div>
                </div>
                <div id="result-card-3" class="result-card glass-effect p-6 md:p-8 rounded-2xl shadow-xl flex flex-col md:flex-row md:space-x-8 items-center">
                     <div class="w-full md:w-2/5"><canvas id="chart3"></canvas></div>
                    <div class="w-full md:w-3/5 mt-6 md:mt-0 text-center md:text-left">
                        <h3 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">Tu Forma de Conectar ü§ù</h3>
                         <div id="result-text-3"><h4 class="text-xl md:text-2xl font-bold text-green-700 mb-2"></h4><p class="text-gray-700 text-base md:text-lg"></p></div>
                    </div>
                </div>
            </div>

            <div id="error-container" class="glass-effect p-8 rounded-2xl shadow-xl text-center" style="display: none;">
                <h3 class="text-3xl font-bold text-amber-600 mb-4">¬°Ups! Algo sali√≥ mal</h3>
                <p class="text-lg text-gray-700 mb-6">No pudimos encontrar tus resultados. Es posible que necesites completar el test primero.</p>
                <a href="index.html" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl text-lg">Volver al Inicio</a>
            </div>
        </section>
    </main>
    
    <footer class="text-center py-8 mt-8 md:mt-16">
        <div class="max-w-4xl mx-auto px-4"><p class="text-white text-sm mb-2">¬© 2025 UNIMINUTO. Todos los derechos reservados.</p><p class="text-blue-200 text-sm font-medium">Observatorio de Datos SYMBIOTIC</p></div>
    </footer>

    <script>
        const surveyDefinitions = {
            diagrams: [
                { id: 'd1', axes: { x: ['Experiencia Integral', 'Profesional Pragm√°tico'], y: ['Necesidad de Soporte', 'Autonom√≠a y Resiliencia']}, archetypes: { '1,1': { name: 'El Emprendedor Pragm√°tico', desc: 'Eres proactivo, te enfocas en resultados y ves la universidad como un trampol√≠n para tus ambiciones. Te creces ante los retos y buscas aplicar todo lo que aprendes.' }, '-1,1': { name: 'El Explorador Curioso', desc: 'Te mueve la curiosidad y el crecimiento personal. Eres aut√≥nomo y disfrutas explorando ideas y temas diversos por tu cuenta, m√°s all√° de la aplicaci√≥n laboral inmediata.' }, '-1,-1': { name: 'El Constructor de Comunidad', desc: 'Valoras una formaci√≥n integral y un fuerte sentido de pertenencia. Te sientes m√°s seguro en un entorno con gu√≠as claras y un fuerte apoyo de profesores y compa√±eros.' }, '1,-1': { name: 'El Profesional Enfocado', desc: 'Tienes una meta profesional clara y buscas el camino m√°s eficiente y estructurado para llegar a ella. Valoras la gu√≠a experta y los procesos bien definidos.' } } },
                { id: 'd2', axes: { x: ['Conceptual/Te√≥rico', 'Aplicado/Pr√°ctico'], y: ['Guiado/Estructurado', 'Auto-Gestionado']}, archetypes: { '1,1': { name: 'El Creador Aut√≥nomo', desc: 'Aprendes "haciendo". Te encanta experimentar, construir y aplicar conocimientos de forma independiente. Los retos pr√°cticos te motivan.' }, '-1,1': { name: 'El Intelectual Independiente', desc: 'Disfrutas profundizando en las teor√≠as por tu cuenta. Te apasiona investigar y entender el "porqu√©" de las cosas con gran autonom√≠a.' }, '-1,-1': { name: 'El Acad√©mico Met√≥dico', desc: 'Valoras una base te√≥rica s√≥lida y prefieres que un experto te gu√≠e a trav√©s de ella con una estructura clara y organizada.' }, '1,-1': { name: 'El T√©cnico Guiado', desc: 'Buscas aprender habilidades pr√°cticas y concretas, y te sientes m√°s seguro siguiendo un "paso a paso" claro y con supervisi√≥n constante.' } } },
                { id: 'd3', axes: { x: ['Bienestar/Comunidad', 'Networking/Oportunidades'], y: ['Independiente/Selectivo', 'Buscador Activo']}, archetypes: { '1,1': { name: 'El Conector Estrat√©gico', desc: 'Eres un networker por naturaleza. Te mueves con soltura en eventos sociales, buscando activamente oportunidades y contactos que impulsen tu futuro.' }, '-1,1': { name: 'El L√≠der Comunitario', desc: 'Eres el alma de la vida universitaria. Te involucras activamente para construir comunidad, organizar eventos y fomentar un ambiente de apoyo y bienestar.' }, '-1,-1': { name: 'El Compa√±ero Ocasional', desc: 'Valoras la comunidad y las amistades profundas, pero prefieres interacciones en grupos peque√±os y un entorno social m√°s tranquilo y selectivo.' }, '1,-1': { name: 'El Profesional Independiente', desc: 'Tu enfoque es claro y tus interacciones sociales suelen ser selectivas y con un prop√≥sito. Valoras tu independencia y te centras en tus objetivos.' } } }
            ]
        };

        document.addEventListener('DOMContentLoaded', () => {
            const colorPalettes = [
                { bg: 'rgba(59, 130, 246, 0.2)', text: '#1D4ED8', point: '#1D4ED8' },
                { bg: 'rgba(168, 85, 247, 0.2)', text: '#7E22CE', point: '#7E22CE' },
                { bg: 'rgba(16, 185, 129, 0.2)', text: '#047857', point: '#047857' }
            ];

            const resultsString = localStorage.getItem('surveyResults');
            const studentInfoString = sessionStorage.getItem('studentInfo'); // Cambiado a sessionStorage
            
            if(studentInfoString) {
                const studentInfo = JSON.parse(studentInfoString);
                document.getElementById('student-info-display').innerHTML = `Resultados para <span class="font-semibold text-blue-700">${studentInfo.email}</span>`;
            }

            if (!resultsString) {
                document.getElementById('results-container').style.display = 'none';
                document.getElementById('error-container').style.display = 'block';
                return;
            }

            const results = JSON.parse(resultsString);
            
            results.forEach((result, index) => {
                const diagramIndex = index + 1;
                const diagramInfo = surveyDefinitions.diagrams[index];
                const colors = colorPalettes[index];
                
                const quadrantX = result.scoreX >= 0 ? 1 : -1;
                const quadrantY = result.scoreY >= 0 ? 1 : -1;
                const archetype = diagramInfo.archetypes[`${quadrantX},${quadrantY}`];

                const container = document.getElementById(`result-text-${diagramIndex}`);
                container.querySelector('h4').textContent = archetype.name;
                container.querySelector('p').textContent = archetype.desc;

                const ctx = document.getElementById(`chart${diagramIndex}`).getContext('2d');

                const quadrantHighlighter = {
                    id: 'quadrantHighlighter',
                    beforeDraw: (chart) => {
                        const { ctx, chartArea: { top, bottom, left, right }, scales: { x, y } } = chart;
                        ctx.save();
                        const x0 = x.getPixelForValue(0);
                        const y0 = y.getPixelForValue(0);
                        ctx.fillStyle = colors.bg;
                        if (quadrantX === 1 && quadrantY === 1) ctx.fillRect(x0, top, right - x0, y0 - top);
                        else if (quadrantX === -1 && quadrantY === 1) ctx.fillRect(left, top, x0 - left, y0 - top);
                        else if (quadrantX === -1 && quadrantY === -1) ctx.fillRect(left, y0, x0 - left, bottom - y0);
                        else if (quadrantX === 1 && quadrantY === -1) ctx.fillRect(x0, y0, right - x0, bottom - y0);
                        ctx.restore();
                    }
                };

                const quadrantLabels = {
                    id: 'quadrantLabels',
                    afterDraw: (chart) => {
                        const { ctx, scales: { x: xAxis, y: yAxis } } = chart;
                        ctx.save();
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        const archetypes = diagramInfo.archetypes;
                        const positions = {'1,1': {x:6,y:6},'-1,1':{x:-6,y:6},'-1,-1':{x:-6,y:-6},'1,-1':{x:6,y:-6}};
                        for (const key in positions) {
                            const [qx, qy] = key.split(',').map(Number);
                            if (qx === quadrantX && qy === quadrantY) {
                                ctx.fillStyle = colors.text;
                                ctx.font = 'bold 13px Inter, sans-serif';
                            } else {
                                ctx.fillStyle = 'rgba(0, 0, 0, 0.4)';
                                ctx.font = '600 11px Inter, sans-serif';
                            }
                            const pos = positions[key];
                            ctx.fillText(archetypes[key].name, xAxis.getPixelForValue(pos.x), yAxis.getPixelForValue(pos.y));
                        }
                        ctx.fillStyle = 'rgba(0, 0, 0, 0.9)';
                        ctx.font = 'bold 12px Inter, sans-serif';
                        ctx.textAlign = 'center';
                        ctx.fillText(diagramInfo.axes.y[1], xAxis.getPixelForValue(0), yAxis.top - 15);
                        ctx.fillText(diagramInfo.axes.y[0], xAxis.getPixelForValue(0), yAxis.bottom + 15);
                        ctx.textBaseline = 'middle';
                        ctx.textAlign = 'right';
                        ctx.fillText(diagramInfo.axes.x[1], xAxis.right, yAxis.getPixelForValue(0));
                        ctx.textAlign = 'left';
                        ctx.fillText(diagramInfo.axes.x[0], xAxis.left, yAxis.getPixelForValue(0));
                        ctx.restore();
                    }
                };

                new Chart(ctx, {
                    type: 'scatter',
                    data: {
                        datasets: [{
                            label: 'Tu Perfil', data: [{ x: result.scoreX, y: result.scoreY }],
                            backgroundColor: colors.point, pointRadius: 10, pointHoverRadius: 12,
                            borderColor: '#FFFFFF', borderWidth: 3
                        }]
                    },
                    options: {
                        aspectRatio: 1,
                        scales: {
                            x: { min: -12, max: 12, grid: { color: 'rgba(0,0,0,0.08)', zeroLineColor: 'rgba(0,0,0,0.25)' }, ticks: { display: false } },
                            y: { min: -12, max: 12, grid: { color: 'rgba(0,0,0,0.08)', zeroLineColor: 'rgba(0,0,0,0.25)' }, ticks: { display: false } }
                        },
                        plugins: { legend: { display: false }, tooltip: { callbacks: { label: (c) => `Tu posici√≥n: (X: ${c.parsed.x}, Y: ${c.parsed.y})` } } },
                        layout: { padding: { top: 30, bottom: 30, left: 20, right: 20 } }
                    },
                    plugins: [quadrantHighlighter, quadrantLabels]
                });
            });
        });
    </script>
</body>
</html>
